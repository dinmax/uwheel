/*! uw - v0.0.11 - 2015-06-08 */module.exports=new function(){var a=uw.config,b=require("q"),c=require("mssql"),d=require("./log.js"),e="sqlserver 	",a={user:a.database.user,password:a.database.password,server:a.database.ip,database:a.database.dbname,options:{encrypt:!1}},f=this;this.connect=function(){var f=b.defer(),g=new c.Connection(a,function(a){a?(d.error("UW ",e,"connect ",a.message),f.reject(a)):f.resolve(g)});return f.promise},this.query=function(a){return f.connect().then(function(d){var e=b.defer(),f=new c.Request(d);return f.query(a,function(a,b){d.close(),a?e.reject(a):e.resolve(b)}),e.promise})["catch"](function(a){d.error(e,a)})},this.getTables=function(){return f.query("SELECT 'make the sqlserver strategy!' as message")}};