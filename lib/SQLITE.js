/*! uw - v0.0.8 - 2015-04-06 */module.exports=new function(){var a,b=uw.config,c=require("q"),d=require("sqlite3").verbose(),e="sqlite",f=this;this.connect=function(){function e(){f.resolve()}var f=c.defer();return a=new d.Database(b.database.dbname,e),f.promise},this.getAll=function(b,d){function g(d){var e=c.defer();return a.all(b,function(a,b){a?e.reject(a):e.resolve(b)}),e.promise}function h(a){console.error(e,a)}return f.connect().then(g)["catch"](h)},this.run=function(b,d){function g(e){var f=c.defer();return a.run(b,d,function(a){a?f.reject(a):f.resolve({lastID:this.lastID,changes:this.changes})}),f.promise}function h(a){console.error(e,a)}return f.connect().then(g)["catch"](h)}};