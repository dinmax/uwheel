/*! uw - v0.0.9 - 2015-04-08 */module.exports=new function(){var a=uw.config,b=require("q"),c=require("pg"),d=require("./log.js"),e="pg 	",f=require("util").format("postgres://%s:%s@%s/%s",a.database.user,a.database.password,a.database.ip,a.database.dbname),g=this;this.connect=function(){var a=b.defer();return c.connect(f,function(b,c,d){b?a.reject(b):(c.release=d,a.resolve(c))}),a.promise},this.query=function(a,c,f){return g.connect().then(function(d){var e=b.defer();return d.query(a,c,function(a,b){f?b.release=d.release:d.release(),a?e.reject(a):e.resolve(b)}),e.promise})["catch"](function(a){d.error(e,a)})}};